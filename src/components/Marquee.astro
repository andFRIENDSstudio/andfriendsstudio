---
import projectsData from '../data/projects.json';
const projects = projectsData.projects || [];

// Helper to extract year from date string
const getYear = (dateString) => {
    if (!dateString) return '2024';
    return new Date(dateString).getFullYear().toString();
};
---

<div class="marquee-wrapper">
    <div class="marquee-track">
        {projects.map((project) => (
            <div 
                class="grey-box"
                data-project={project.title}
                data-contributors={project.contributors?.join(', ')}
                data-year={getYear(project.date)}
                style={`background-image: url(${project.image}); background-size: cover; background-position: center;`}
            >
            </div>
        ))}
    </div>
</div>

<style>
    .grey-box {
        height: 100%; /* Fixed height for all */
        aspect-ratio: auto; /* Let width be determined by image */
        min-width: 250px; /* Minimum width so they don't get too narrow */
        flex-shrink: 0;
    }
</style>